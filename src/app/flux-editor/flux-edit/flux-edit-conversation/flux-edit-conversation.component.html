<div class="conversation">
  <a mat-icon-button (click)="NavBack()"><mat-icon>arrow_back</mat-icon></a>
  <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutAlign="start stretch">
    <mat-card>
      <mat-card-title>Conversation</mat-card-title>
      <mat-card-content>
        <mat-form-field>
            <input matInput [(ngModel)]="conversation.id" (change)="UpdateDataLocal($event)" type="text" placeholder="ID"/>
        </mat-form-field>
        <mat-form-field>
            <select matNativeControl [(ngModel)]="conversation.character" (change)="UpdateDataLocal($event)" placeholder="Character">
              <option value="">Narrator</option>
              <option *ngFor="let character of characters" value= {{character.alias}}>
                  {{character.label}}
              </option>
            </select>
        </mat-form-field>
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-title>Dialog</mat-card-title>
      <mat-card-content>
          <div class="triggers">
            <h3>Triggers</h3>
            <button (click)="AddTrigger(conversation)">Add Trigger</button>
            <ul>
                <li *ngIf="conversation.triggers">
                  <input *ngFor="let trigger of conversation.triggers; let i = index; trackBy:trackByFn" [(ngModel)]="conversation.triggers[i]"  (change)="UpdateDataLocal($event)"/>
                </li>
            </ul>
          </div>
          <flux-edit-dialog [dialog]="conversation.dialog" (changed)="UpdateDataLocal($event)"></flux-edit-dialog>
      </mat-card-content>
    </mat-card>
  </div>
</div>
